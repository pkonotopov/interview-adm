# PostgreSQL в контейнере

## Задача

1. Написать Dockerfile для создания своего образа PostgreSQL v16
2. Докер образ должен содержать расширения:
   1. pgvector
   2. TimescaleDB
   3. образ должен содержать open source версию pg_probackup
3. При старте контейнера должны запускаться скрипты, делающие что-то полезное при первом запуске контейнера
   1. Скрипты должны:
      1. Создавать тестовую БД - `test`
      2. Создавать пользователя `test_user` с доступом только к тестовой БД
4. На основе образа нужно запустить сервер PostgreSQL в контейнере, который
   1. Должен принимать соединения из хостовой системы на TCP порт `15432`
   2. При соединении клиента с сервером обязательно должен быть запрошен пароль
   3. При сбое или перезагрузке, докер контейнер должен быть автоматически перезапущен
   4. При удалении контейнера и запуске нового, не должны быть потеряны текущие изменения в БД
5.  Необходимо использовать репозиторий github для публикации Dockerfile и прочих вспомогательных или необходимых для сборки образа файлов
6. Написать документация в формате Markdown, которая должна содержать:
   1. Как запустить сборку образа локально
   2. Как запустить из собранного образа контейнер, согласно требованиям задачи
7.  (*) Настроить github CI
   1. В репозитории должно быть две ветки main и dev 
   2. Для объединения изменений должен быть использовать механизм pull-реквестов
      1. При успешной сборке становится возможным объединение (merge) изменений из dev в main ветку
   3. При push-е изменений в dev ветку запускается сборка докер образа
   4. При объединении изменений, запускается CI конвейер, который собирает и публикует образ, тегируя (`tag`) его версией

## Комментарии

1. Готовый официальный докер образ использовать нельзя
2. Публикация может быть осуществлена в docker hub или любой другой публичный реестр образов

## Результат

1. Отличным результатом будет считаться Dockerfile, из которого получается образ размером не более 150Мб
2. Собственный докер образ опубликован в каком-либо публичном реестре докер образов автоматически, в результате работы встроенного CI github. 
3. Можно запустить локально PostgreSQL 16 в контейнере, руководствуясь написанной документаций